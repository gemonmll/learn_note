## **03 框架选型和推理优化**
> ### **第一部分 大模型框架选择**
> **大模型框架选择**
> ![Alt text](image-60.png)
> ![Alt text](image-61.png)
> 各大框架的优缺点
> deepspeed+megatron 预训练更为常用
> accelerate更适用于微调
> ![Alt text](image-62.png)
> **数据并行 zero分片**
> dp\ddp\fsdp
> ![Alt text](image-63.png)
> **dp 数据并行**
> ![Alt text](image-64.png)
> **算子介绍**
> reduce-scatter\all-gather\all-reduce
> ![Alt text](image-65.png)
> **ddp 分布式数据并行**
> 没有ps,参数服务器
> ![Alt text](image-66.png)
> **zero阶段**
> zero 1 阶段 数据并行
> ![Alt text](image-67.png)
> 2阶段 分层更新梯度
> ![Alt text](image-68.png)
> 3阶段
> ![Alt text](image-69.png)
> **accelerate使用**
> 增加一行，使用accelerator的并行
> 重新包装下
> ![Alt text](image-70.png)
> 运行
> ![Alt text](image-71.png)
> **各个模型框架使用场景**
> ![Alt text](image-72.png)
> ## **第二部分模型推理优化**
> ![Alt text](image-73.png)
> 模型推理压缩优化
> ![Alt text](image-74.png)
> **知识蒸馏**
> ![Alt text](image-75.png)
> ![Alt text](image-76.png)
> 让两个模型最后一层输出尽量相似，kl散度和l2距离
> ![Alt text](image-77.png)